<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Angelopp USSD Tester</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 780px; margin: 40px auto; }
    input, textarea { width: 100%; padding: 10px; margin: 8px 0; }
    button { padding: 10px 16px; cursor: pointer; }
    pre { background:#f5f5f5; padding:12px; white-space:pre-wrap; }
  </style>
</head>
<body>
  <h1>Angelopp USSD Tester</h1>

  <label>Base URL</label>
  <input id="base" value="/ussd" />

  <label>sessionId</label>
  <input id="sid" />

  <label>phoneNumber</label>
  <input id="phone" value="+23276000001" />

  <label>text</label>
  <input id="text" value="" />

  <button id="startBtn" type="button">Start (text=)</button>
<button onclick="send()">Send</button>

  <h3>Response</h3>
  <pre id="out"></pre>

<script>
  function randSid(){
    return "WEB" + Date.now();
  }
  document.getElementById("sid").value = randSid();

  async function send(){
    const base = document.getElementById("base").value || "/ussd";
    const sid = document.getElementById("sid").value || randSid();
    const phone = document.getElementById("phone").value;
    const text = document.getElementById("text").value;

    const body = new URLSearchParams();
    body.set("sessionId", sid);
    body.set("phoneNumber", phone);
    body.set("text", text);

    const r = await fetch(base, { method:"POST", body });
    const t = await r.text();
    document.getElementById("out").textContent = t;
    document.getElementById("sid").value = sid;
  }
</script>
</body>
</html>
